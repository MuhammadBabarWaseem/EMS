<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="loginstyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>  
  <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'> 
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <title>Login Page</title>
</head>
<body class="body">
	
<div class="login-page">
  <div class="form">

    <!-- <form> -->
      <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_q5pk6p1k.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop  autoplay></lottie-player>
      <input type="text" autocomplete="off" id="email" placeholder="&#xf007;   Email"/>
      <input type="password" id="password" placeholder="&#xf023;  password"/>
<i class="fas fa-eye iconEye" onclick="show()"></i> 
      <br>
      <br>
      <button onclick="loginBtn()">LOGIN</button>
      <p class="message"></p>
    <!-- </form> -->

    <form class="login-form">
      <button type="button" onclick="window.location.href='index.html'">SIGN UP</button>
    </form>
  </div>
</div>

  <script>
    function show(){
      var password = document.getElementById("password");
      var icon = document.querySelector(".fas")

      // ========== Checking type of password ===========
      if(password.type === "password"){
        password.type = "text";
      }
      else {
        password.type = "password";
      }
    };

    
function loginBtn(){
    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;

    if(email === ''){
      swal('Oops...','Email Field is Empty!','error')
    }
    if(password === ''){
      swal('Oops...','Password Field is Empty!','error')
    }
    if(email === '' && password === ''){
      swal('Oops...','Both Fields Are Empty!','error')
    }

else{

    var users = JSON.parse(localStorage.getItem('users'));

    users.forEach(user => {
      
    if(user.email === email){
    if(user.password === password ){
    localStorage.setItem('authenticated_user', JSON.stringify(user));
        swal(
          "Hurrah!", "User SignIn SuccessFul!" ,"success"
        ).then(function() {

          let user_records = new Array();
          user_records=JSON.parse(localStorage.getItem("users"))?JSON.parse(localStorage.getItem("users")):[]
          let current_user=user_records.filter((v)=>{return v.email==email && v.password==password})[0]
          localStorage.setItem('Username',current_user.username);

          window.location.href = "EMS.html";
              });
}

else{
    swal("Oops!", "Incorrect Email Or Password ", "error")
}
    }
});



}
}





  </script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</body>

</html>